<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>MCE â€” Monadic Context Engineering</title>

  <meta name="description" content="Monadic Context Engineering (MCE) is a principled framework for AI agent orchestration using monad transformers, explicit state, error handling, and parallel applicatives.">
  <meta name="keywords" content="Monadic Context Engineering, MCE, AI Agents, Monads, Applicatives, Monad Transformers, Agent Orchestration, Async, Pydantic">
  <meta name="citation_title" content="Monadic Context Engineering">
  <meta name="citation_author" content="Yifan Zhang">
  <meta name="citation_author" content="Mengdi Wang">
  <meta name="citation_publication_date" content="2025/09/11">
  <meta name="citation_pdf_url" content="https://yifanzhang-pro.github.io/monadic-context-engineering/MCE.pdf">
  <meta property="og:title" content="Monadic Context Engineering">
  <meta property="og:description" content="A monadic framework for orchestrating AI agents with explicit state, deterministic errors, and parallel applicatives.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://yifanzhang-pro.github.io/monadic-context-engineering/">
  <link rel="canonical" href="https://yifanzhang-pro.github.io/monadic-context-engineering/">
  <link rel="icon" href="https://placehold.co/32x32/0A2540/FFFFFF?text=M" type="image/x-icon">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;700&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.9.4/css/bulma.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">

  <script>
    MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']],
        displayMath: [['$$', '$$'], ['\\[', '\\]']],
        macros: { 
            bm: ["\\mathbf{#1}", 1],
            bind: ["\\texttt{bind}"],
            map: ["\\texttt{map}"]
        }
      },
      svg: { fontCache: 'global' }
    };
  </script>
  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>

  <style>
    :root{
      --primary-color:#0A2540;    /* PLI Blue / Deep Navy */
      --accent-color:#00C2FF;     /* Cyan Accent */
      --main-bg:#FFFFFF;
      --content-bg:#F6F8FA;
      --text-main:#2D2D2D;
      --text-on-primary:#FFFFFF;
      --link-color:var(--primary-color);
      --link-hover-color:#143E73;
      --primary-color-rgb:10,37,64;
      --link-color-rgb:10,37,64;
      --border-color:#e5e7eb;
      --shadow-color:rgba(0,0,0,0.1);
    }

    html{scroll-behavior:smooth}
    body{
      font-family:'Inter',system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      color:var(--text-main); background:var(--main-bg);
      display:flex; flex-direction:column; min-height:100vh;
      text-rendering:optimizeLegibility; -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
    }

    /* Navbar */
    .navbar{
      background:rgba(var(--primary-color-rgb),0.92);
      backdrop-filter:blur(10px);
      box-shadow:0 2px 5px var(--shadow-color);
      position:sticky; top:0; z-index:100;
    }
    .navbar .navbar-item, .navbar .navbar-link{ color:var(--text-on-primary); font-weight:500; }
    .navbar a.navbar-item:hover, .navbar .navbar-link:hover, .navbar-item.is-active{ color:var(--accent-color)!important; background:transparent!important; }
    .navbar-burger{ color:var(--text-on-primary); }

    /* Hero */
    .hero{ background:linear-gradient(180deg, #0A2540 0%, #0e3055 100%); color:var(--text-on-primary); }
    .hero .title{
      font-family:'Space Grotesk', sans-serif; font-weight:700; color:var(--text-on-primary);
      font-size:3.0rem; line-height:1.1;
    }
    .hero .subtitle.is-hero-subtitle{
      color:rgba(255,255,255,0.92); font-size:1.18rem; max-width:980px; margin:1.25rem auto 2rem auto;
    }
    .hero .subtitle .highlight{ color:var(--accent-color); font-weight:600; }

    .project-links a{ color:var(--text-on-primary); font-size:1.45rem; margin:0 0.6rem; transition:transform .25s ease, color .25s ease; }
    .project-links a:hover{ color:var(--accent-color); transform:translateY(-2px); }

    /* Authors List styling */
    .authors-list { font-size: 1.1rem; line-height: 1.6; margin-top: 1rem; color: rgba(255,255,255,0.95); }
    .affiliations { font-size: 0.9rem; color: rgba(255,255,255,0.7); margin-top: 0.5rem; }

    /* Sections */
    .section.content-section{ padding:4.5rem 1.25rem; border-bottom:1px solid var(--border-color); }
    .section.content-section:nth-child(even){ background:var(--content-bg); }
    .section-title{
      font-family:'Space Grotesk', sans-serif; font-weight:700; color:var(--primary-color);
      margin-bottom:2.2rem;
    }
    .content{ max-width:1000px; margin:0 auto; line-height:1.8; font-size:1.06rem; }
    .content a{ color:var(--link-color); font-weight:500; text-decoration:none; border-bottom:2px solid rgba(var(--link-color-rgb),.2); }
    .content a:hover{ color:var(--link-hover-color); border-bottom-color:var(--link-hover-color); }
    .content img{ display:block; margin:1.75rem auto; max-width:100%; border-radius:10px; box-shadow:0 4px 15px rgba(0,0,0,0.08); }

    /* Code & Pre */
    .content pre{
      background:#0f172a; color:#cbd5e1; border-radius:8px; padding:1.1em 1.2em;
      overflow:auto; box-shadow:inset 0 0 0 1px rgba(255,255,255,0.04);
      font-size:0.95rem;
    }
    code{ background:#f2f4f7; color:#1f2937; padding:0.18em 0.38em; border-radius:4px; font-size:85%; }
    pre code{ background:transparent; color:inherit; padding:0; font-size:inherit; }

    /* Badges / pills - PLI Style */
    .pill{ display:inline-block; padding:.35rem .6rem; border-radius:999px; font-size:.82rem; background:#E6F7FF; color:#0A2540; margin:.15rem .25rem; border:1px solid #C8ECFF; }

    /* Footer */
    .footer{
      background:var(--primary-color); color:var(--text-on-primary);
      padding:2rem 1.5rem; border-top:3px solid var(--accent-color); margin-top:auto;
    }
    .footer a{ color:var(--accent-color); font-weight:500; }
    .footer a:hover{ color:#ffffff; }

    /* Utility */
    .mini-caption{ display:block; margin-top:.35rem; color:#6b7280; font-style:italic; text-align:center;}
    .tight{ margin-top:0.5rem; margin-bottom:0.75rem; }
    .columns.is-vcentered { align-items: center; }
  </style>
</head>
<body>

  <nav class="navbar" role="navigation" aria-label="main navigation">
    <div class="container">
      <div class="navbar-brand">
        <a class="navbar-item is-size-5 has-text-weight-bold" href="#">MCE</a>
        <a role="button" class="navbar-burger" aria-label="menu" aria-expanded="false" data-target="navbarMenu">
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
        </a>
      </div>
      <div id="navbarMenu" class="navbar-menu">
        <div class="navbar-end">
          <a href="#abstract" class="navbar-item">Abstract</a>
          <a href="#stack" class="navbar-item">The Stack</a>
          <a href="#flow" class="navbar-item">Declarative Flow</a>
          <a href="#parallelism" class="navbar-item">Parallelism</a>
          <a href="#meta" class="navbar-item">Meta-Agents</a>
          <a href="#citation" class="navbar-item">Citation</a>
        </div>
      </div>
    </div>
  </nav>

  <header class="hero is-medium">
    <div class="hero-body">
      <div class="container has-text-centered">
        <h1 class="title">MCE</h1>
        <h2 class="subtitle is-hero-subtitle">
          <span class="highlight" style="font-size:2rem;">Monadic Context Engineering</span>
          <br>
          A composable framework for AI agent orchestration built on <span class="highlight">monad transformers</span>, explicit state, deterministic errors, and <span class="highlight">applicative parallelism</span>.
        </h2>

        <div class="authors-list">
          <a href="https://yifzhang.com" target="_blank" rel="noopener" style="color:inherit; text-decoration:underline; text-decoration-color:var(--accent-color); text-underline-offset:4px; text-decoration-thickness:2px;">Yifan Zhang</a>, Mengdi Wang
        </div>
        <div class="affiliations">
          Princeton University
        </div>

        <div class="project-links" style="margin-top:1.5rem;">
          <a href="https://yifanzhang-pro.github.io/monadic-context-engineering/MCE.pdf" target="_blank" rel="noopener" aria-label="Paper PDF"><i class="fas fa-file-pdf"></i></a>
          <a href="https://github.com/yifanzhang-pro/monadic-context-engineering" target="_blank" rel="noopener" aria-label="GitHub Repository"><i class="fab fa-github"></i></a>
          <a href="#citation" aria-label="Citation"><i class="fas fa-quote-right"></i></a>
        </div>
        <div style="margin-top:1.25rem;">
          <span class="pill">StateT + EitherT + IO</span>
          <span class="pill">Async Applicatives</span>
          <span class="pill">Explicit Effects</span>
          <span class="pill">Composable Agents</span>
          <span class="pill">Deterministic Failures</span>
        </div>
      </div>
    </div>
  </header>

  <main>
    <section id="abstract" class="section content-section">
      <div class="container">
        <h2 class="title is-3 has-text-centered section-title">Abstract</h2>
        <div class="content has-text-justified" style="max-width:880px;">
          <p>
            Large language model agents often rely on imperative orchestration that is difficult to test, scale, or reason about. MCE introduces a formal, algebraic foundation based on Functors, Applicatives, and Monads, enabling a uniform structure for stateful, fallible, and asynchronous workflows. By stacking monad transformers, MCE composes these concerns into a single, reusable interface for agent development.
          </p>
          <p>
            The result is a workflow model that reads like a specification while remaining runnable, observable, and easy to extend with tool effects. Context, errors, and side effects are explicit at the type level, so orchestration logic stays predictable as systems scale.
          </p>
          <p class="has-text-centered" style="margin-top:1.25rem;">
            <a class="button is-link is-light" href="https://github.com/yifanzhang-pro/monadic-context-engineering" target="_blank" rel="noopener">
              <span class="icon"><i class="fab fa-github"></i></span><span>Code and Library</span>
            </a>
            <a class="button is-primary" style="background:var(--primary-color);" href="https://yifanzhang-pro.github.io/monadic-context-engineering/MCE.pdf" target="_blank" rel="noopener">
              <span class="icon"><i class="fas fa-file-pdf"></i></span><span>Read the Paper</span>
            </a>
          </p>
        </div>
      </div>
    </section>

    <section id="stack" class="section content-section">
      <div class="container">
        <h2 class="title is-3 has-text-centered section-title">The Monad Stack</h2>
        <div class="content">
          <p>
            MCE models every run as a transformer stack that composes state, error handling, and effects into a single algebra. The formal type signature of the <strong>AgentMonad</strong> encapsulates these capabilities via <strong>Monad Transformer</strong> composition:          </p>
          <p class="has-text-centered">
            $$ \text{AgentMonad} \cong S \to \text{IO}(\text{Either}(E, (A, S))) $$
          </p>
          
          <div class="columns is-vcentered" style="margin-top:2rem;">
            <div class="column is-6">
                <div class="box has-text-centered" style="height:100%;">
                    <h4 class="title is-5" style="color:var(--primary-color);">The Context Stack</h4>
                    <p class="tight"><strong>Structure:</strong> Monad Transformers</p>
                    <hr>
                    <div style="text-align:left; font-size:0.95rem;">
                        <p><strong>1. StateT:</strong> Context as a first-class value. Threads memory and tool outputs without plumbing.</p>
                        <p><strong>2. EitherT:</strong> Deterministic failures. Short-circuits execution upon error with structured info.</p>
                        <p><strong>3. Task / IO:</strong> Explicit effects. Encapsulates async tool calls and side effects.</p>
                    </div>
                </div>
            </div>
            <div class="column is-6">
                <div class="box has-text-centered" style="height:100%;">
                    <h4 class="title is-5" style="color:#0085bd;">The Algebraic Interface</h4>
                    <p class="tight"><strong>Operation:</strong> Functor / Applicative / Monad</p>
                    <hr>
                    <div style="text-align:left; font-size:0.95rem;">
                        <p><strong>$\text{map} (f)$:</strong> Transform values purely within the context.</p>
                        <p><strong>$\text{then} (f)$:</strong> Sequence dependent steps (The "Railway"). Fails fast if previous step errored.</p>
                        <p><strong>$\text{gather} ([f])$:</strong> Run independent async flows in parallel (Applicative).</p>
                    </div>
                </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section id="flow" class="section content-section">
      <div class="container">
        <h2 class="title is-3 has-text-centered section-title">Declarative Flow</h2>
        <div class="content">
          <p>
            The <code>AgentMonad</code> exposes a small surface area for sequencing. Workflows stay linear and readable while retaining full introspection. The code below demonstrates how a complex agent loop reads like a linear specification.
          </p>

          <h4 class="title is-5 tight">Sequential Logic</h4>
          <pre><code># The workflow reads like a high-level spec.
# Failures in any step automatically short-circuit the rest of the chain.

task = "What is a Monad?"
initial_state = AgentState(task=task)

flow = (
    AgentMonad.start(initial_state)
    .then(lambda s, _: plan_action(s, task))
    .then(lambda s, call: execute_tool(s, call))
    .then(synthesize_answer)
    .then(format_output)
)</code></pre>
          
          <p class="has-text-centered is-size-7 mt-3">
             Logic is separated from orchestration. Each function focuses on one task, while the Monad handles the "glue".
          </p>
        </div>
      </div>
    </section>

    <section id="parallelism" class="section content-section">
      <div class="container">
        <h2 class="title is-3 has-text-centered section-title">Applicative Parallelism</h2>
        <div class="content">
          <p>
            While Monads sequence dependent tasks, Applicative Functors handle independent ones. Using <code>AsyncAgentMonad.gather</code>, MCE allows agents to branch out, execute multiple IO-bound tool calls concurrently, and merge results back into the main context.
          </p>

          <h4 class="title is-5 tight">Parallel Execution</h4>
          <pre><code># Independent tasks run concurrently via Applicative 'gather'.
# The result preserves ordering and propagates the first failure.

gathered_flow = AsyncAgentMonad.gather([
    news_agent_flow,
    weather_agent_flow,
    stocks_agent_flow,
])

# The final AgentMonad holds the combined outputs in .value
result_flow = await gathered_flow.run()
combined = result_flow.value</code></pre>

          <p>
            This creates a <strong>Fork-Join</strong> topology purely through algebraic composition, recovering high-performance concurrency patterns without manual thread management.
          </p>
        </div>
      </div>
    </section>

    <section id="meta" class="section content-section">
      <div class="container">
        <h2 class="title is-3 has-text-centered section-title">Meta-Agents</h2>
        <div class="content">
          <p>
            Meta-agents operate on workflows instead of raw data. They synthesize sub-agent chains, run them, and combine results into a higher-level monadic context. MCE keeps these systems predictable by reusing the same algebra at every layer.
          </p>
          <div class="columns is-centered is-multiline" style="margin-top:1rem;">
             <div class="column is-4">
               <div class="box" style="height:100%">
                 <h5 class="title is-6 has-text-primary">Planner</h5>
                 <p class="is-size-7">Build new agent graphs from reusable primitives and apply policy constraints.</p>
               </div>
             </div>
             <div class="column is-4">
               <div class="box" style="height:100%">
                 <h5 class="title is-6 has-text-primary">Evaluator</h5>
                 <p class="is-size-7">Score and repair outputs, rerouting failures to new monadic branches.</p>
               </div>
             </div>
             <div class="column is-4">
               <div class="box" style="height:100%">
                 <h5 class="title is-6 has-text-primary">Governor</h5>
                 <p class="is-size-7">Gate expensive calls, enforce budgets, and log traces with minimal coupling.</p>
               </div>
             </div>
          </div>
        </div>
      </div>
    </section>

    <section id="citation" class="section content-section">
      <div class="container">
        <h2 class="title is-3 has-text-centered section-title">Citation</h2>
        <div class="content">
          <p>If you find this work useful, please cite:</p>
<pre id="cite-bibtex"><code>@article{zhang2025monadic,
  title   = {Monadic Context Engineering: A Principled Framework for AI Agent Orchestration},
  author  = {Zhang, Yifan and Wang, Mengdi},
  year    = {2025},
  month   = {Dec},
  journal = {Github},
  url     = {https://yifanzhang-pro.github.io/monadic-context-engineering/MCE.pdf}
}</code></pre>
          <p>
            <button id="copy-cite" class="button is-small is-link is-light">
              <span class="icon"><i class="fas fa-clipboard"></i></span>
              <span>Copy BibTeX</span>
            </button>
          </p>
        </div>
      </div>
    </section>
  </main>

  <footer class="footer">
    <div class="container">
      <div class="content has-text-centered">
        <p>
          <a href="#abstract">Abstract</a> &nbsp;&bull;&nbsp;
          <a href="#stack">Monad Stack</a> &nbsp;&bull;&nbsp;
          <a href="#parallelism">Parallelism</a> &nbsp;&bull;&nbsp;
          <a href="#meta">Meta-Agents</a> &nbsp;&bull;&nbsp;
          <a href="#citation">Citation</a>
        </p>
        <p>&copy; 2025 MCE Authors. All rights reserved.</p>
      </div>
    </div>
  </footer>

  <script>
    // Mobile navbar toggle
    document.addEventListener('DOMContentLoaded', () => {
      const $burgers = Array.from(document.querySelectorAll('.navbar-burger'));
      $burgers.forEach(el => {
        el.addEventListener('click', () => {
          const target = el.dataset.target;
          const $target = document.getElementById(target);
          el.classList.toggle('is-active');
          $target.classList.toggle('is-active');
        });
      });

      // Hex -> rgb helper
      function hexToRgb(hex){
        const m = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
        return m ? { r:parseInt(m[1],16), g:parseInt(m[2],16), b:parseInt(m[3],16) } : null;
      }
      const root = document.documentElement;
      const styles = getComputedStyle(root);
      const p = styles.getPropertyValue('--primary-color').trim();
      const l = styles.getPropertyValue('--link-color').trim();
      const prgb = hexToRgb(p), lrgb = hexToRgb(l);
      if(prgb){ root.style.setProperty('--primary-color-rgb', `${prgb.r}, ${prgb.g}, ${prgb.b}`); }
      if(lrgb){ root.style.setProperty('--link-color-rgb', `${lrgb.r}, ${lrgb.g}, ${lrgb.b}`); }

      // Copy BibTeX
      const btn = document.getElementById('copy-cite');
      const pre = document.getElementById('cite-bibtex');
      if(btn && pre){
        btn.addEventListener('click', async () => {
          const text = pre.innerText;
          try{
            await navigator.clipboard.writeText(text);
            btn.classList.add('is-success');
            btn.classList.remove('is-link','is-light');
            btn.innerHTML = '<span class="icon"><i class="fas fa-check"></i></span><span>Copied</span>';
            setTimeout(() => {
              btn.classList.remove('is-success');
              btn.classList.add('is-link','is-light');
              btn.innerHTML = '<span class="icon"><i class="fas fa-clipboard"></i></span><span>Copy BibTeX</span>';
            }, 1600);
          }catch(e){
            const range = document.createRange();
            range.selectNode(pre);
            const sel = window.getSelection();
            sel.removeAllRanges();
            sel.addRange(range);
            try{ document.execCommand('copy'); }catch(_){}
            sel.removeAllRanges();
          }
        });
      }
    });
  </script>

</body>
</html>
